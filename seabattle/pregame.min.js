/*! tweensoft.com 2014-10-23 17:43:59 */
function importScript(a){var b=document.createElement("script");b.src="src/"+a,document.head.appendChild(b)}function extend(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superclass=b.prototype}function dragAndDrop(a,b,c,d,e,f){var g,h,i=new Array;a.addEventListener("mousedown",function(a){if(g=a.stageX-a.target.x,h=a.stageY-a.target.y,e)for(var b=0;b<e.length;b++){var d={dx:a.stageX-e[b].x,dy:a.stageY-e[b].y};i[b]=d}c&&c()}),a.addEventListener("pressmove",function(a){if(a.target.x=a.stageX-g,a.target.y=a.stageY-h,e)for(var b=0;b<e.length;b++)e[b].x=a.stageX-i[b].dx,e[b].y=a.stageY-i[b].dy;d&&d()}),a.addEventListener("pressup",function(a){b?b.apply(null,[{x:a.target.x,y:a.target.y}]):console.log(a.target.x,a.target.y)})}function indexOf(a,b){for(var c=-1,d=0;d<a.length;d++)a[d]==b&&(c=d);return c}function searchObjectWithPar(a,b){for(var c=-1,d=0;d<a.length;d++)for(var e=0;e<b.length&&("number"==typeof a[d][b[e][0]]&&a[d][b[e][0]]==Number(b[e][1]));e++)e==b.length-1&&(c=d);return c}function distXY(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))}function round(a){return Math.round(100*a)/100}function shuffle(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a}function radToDeg(a){return 180*a/Math.PI}function buildMasIndex(a,b,c){for(var d=new Array,e=0;c>e;e++)for(var f=0;c>f;f++){var g=[a+e,b+f];d.push(g)}return d}function circlesColliding(a,b,c,d,e,f){var g=d-a,h=e-b,i=c+f;return i*i>g*g+h*h?!0:!1}function cCross(a,b,c,d,e,f,g){d-=a,f-=a,e-=b,g-=b;var h=f-d,i=g-e,j=h*h+i*i,k=2*(d*h+e*i),l=d*d+e*e-c*c;return 0>-k?0>l:2*j>-k?0>4*j*l-k*k:0>j+k+l}function searcPointOfIntersection(a,b,c,d,e,f,g,h){var i=Math.max(a,c),j=Math.max(b,d),k=Math.min(a,c),l=Math.min(b,d),m=Math.max(e,g),n=Math.max(f,h),o=Math.min(e,g),p=Math.min(f,h);if(k>m||o>i||l>n||p>j)return!1;var q,r,s=c-a,t=d-b,u=g-e,v=h-f,w=a-e,x=b-f;if(q=v*s-u*t,0==q)return!1;if(q>0){if(r=s*x-t*w,0>r||r>q)return!1;if(r=u*x-v*w,0>r||r>q)return!1}else{if(r=-(s*x-t*w),0>r||r>-q)return!1;if(r=-(u*x-v*w),0>r||r>-q)return!1}var y=-((a*d-c*b)*(g-e)-(e*h-g*f)*(c-a))/((b-d)*(g-e)-(f-h)*(c-a)),z=((f-h)*-y-(e*h-g*f))/(g-e),A={x:y,y:z};return A}function div(a,b){return(a-a%b)/b}function listenResize(a){listeners_resize.push(a)}function ResizeGame(a,b){var c="number"==typeof a?a:window.innerWidth,d="number"==typeof b?b:window.innerHeight;window.scrollTo(0,1);var e=WIDTHGAME,f=HEIGHTGAME,g=__WIDTHBG-e,h=__HEIGHTBG-f,i=__WIDTHBG-h,j=__HEIGHTBG-g,k=c/d,l=__WIDTHBG/(j-h),m=document.getElementById("gameArea"),n=document.getElementById("imgl2p"),o=document.getElementById("background"),p=document.getElementById("gameField");void 0!=window.orientation&&(k>=1?(o.style.display="none",p.style.display="none",n.style.display="table-cell",document.getElementsByTagName("body")[0].setAttribute("bgcolor","#ffffff")):(o.style.display="block",p.style.display="block",n.style.display="none",document.getElementsByTagName("body")[0].setAttribute("bgcolor","#000000")));var q,r;k>=l?(q=__HEIGHTBG*d/(j-h),r=__WIDTHBG*d/(j-h),m.style.height=q+"px",m.style.width=r+"px",m.style.left=c/2-__WIDTHBG*d/(j-h)/2+"px",m.style.top=-(h/2)*d/(j-h)+"px"):(q=j*c/__WIDTHBG,r=i*c/i,m.style.height=q+"px",m.style.width=r+"px",m.style.top=d/2-__HEIGHTBG*c/__WIDTHBG/2+"px",m.style.left="0px");for(var s=0;s<listeners_resize.length;s++)listeners_resize[s].resize(c,d,r,q,l)}function t_addToTicker(a){var b=indexOf(mas,a);-1==b?mas.push(a):mas[b]=a}function t_delInTicker(a){var b=indexOf(mas,a);-1!=b&&mas.splice(b,1)}function t_delAllInTicker(){for(var a=0;a<mas.length;a++)mas[a]!=__mainTicker&&(t_delInTicker(mas[a]),a--)}function t_setPause(a){var b=indexOf(paused,a);-1==b&&paused.push(a)}function t_delInPause(a){var b=indexOf(paused,a);-1!=b&&paused.splice(a)}function t_allInPause(){for(var a=0;a<mas.length;a++)mas[a]!=__mainTicker&&t_setPause(mas[a])}function t_delAllInPause(){for(var a=0;a<mas.length;a++)t_delInPause(mas[a])}function t_startTicker(){time=setInterval(function(){for(var a=0;a<mas.length;a++)-1==indexOf(paused,mas[a])&&mas[a]()},1e3/__freq)}function t_stopTicker(){clearInterval(time)}function t_removeAllTimers(){mas=new Array}function t_delayOn(a,b,c){var d=0,e=function(){return d>__freq*a?(t_delInTicker(e),void(b&&b.apply(null,c))):void d++};return t_addToTicker(e),e}function t_intervalOn(a,b,c,d,e){var f,g=function(a,b,c){var d=function(c){b.apply(null,c),g(a,b,c)};f=t_delayOn(a,d,c)};d&&t_delayOn(d,function(){t_delInTicker(f),e&&e()}),g(a,b,c)}function Preloader(){this.initialize();var a=new createjs.Bitmap(images.iconimg);setCoor(a,93,562),this.addChild(a);var b=93,c=393;this.setLvl=function(d){setCoor(a,b+c*d,null)}}function v_startPreloader(){return __stageBG=document.getElementById(canvases.bg),__arrBG[bgImgs[0].name]=createBgImg(bgImgs[0].url),__stageBG.appendChild(__arrBG[bgImgs[0].name]),__stageGame=createStage(canvases.game,0,(__HEIGHTBG-HEIGHTGAME)/2),__arrLoc.preloader=new Preloader,__mainTicker=function(){__stageGame.update()},t_addToTicker(__mainTicker),v_choiseLocation("preloader"),__arrLoc.preloader}function v_initLocations(){for(var a=1;a<bgImgs.length;a++)__arrBG[bgImgs[a].name]=createBgImg(bgImgs[a].url),__stageBG.appendChild(__arrBG[bgImgs[a].name]);__arrLoc.game=new Game,__arrLoc.pause=new Pause,__arrLoc.gameOver=new GameOver,__arrLoc.menu=new Menu,__arrLoc.setting=new Setting,__arrLoc.about=new About,__arrLoc.instructions=new Instructions,__arrLoc.bonus=new BonusWnd,__arrLoc.choise=new ChoiseLvl,__arrLoc.shop=new Shop,__arrLoc.yar=new YouAreReady}function v_choiseLocation(a,b){__arrLoc[a]&&(updateBg("game"==a?bgImgs[1].name:"menu"==a?bgImgs[2].name:"preloader"==a?bgImgs[0].name:"instructions"==a?bgImgs[3].name:bgImgs[4].name),__stageGame.removeAllChildren(),__arrLoc[a].update&&__arrLoc[a].update(b),__stageGame.addChild(__arrLoc[a]))}function setCoor(a,b,c){"number"==typeof b&&(a.x=b/__koefDisplay),"number"==typeof c&&(a.y=c/__koefDisplay)}var listeners_resize=new Array,mas=new Array,paused=new Array,__freq=30,time;extend(Preloader,createjs.Container);var __stageGame,__stageBG,__arrBG=new Array,__arrLoc=new Array,__mainTicker,updateBg=function(a){for(var b=0;b<bgImgs.length;b++)__arrBG[bgImgs[b].name]&&__arrBG[bgImgs[b].name].parentNode&&__stageBG.removeChild(__arrBG[bgImgs[b].name]);__stageBG.appendChild(__arrBG[a])},createStage=function(a,b,c){canvasInit(a);var d=document.getElementById(a),e=new createjs.Stage(d);return createjs.Touch.enable(e),e.x=b,e.y=c,e},createBgImg=function(a){var b;return images[a]?b=images[a]:(b=document.createElement("div"),b.style.background="#0099cc",b.style.width="100%",b.style.height="100%"),b.id="bg",b},canvasInit=function(a){var b=document.getElementById(a);b.width=__WIDTHBG,b.height=__HEIGHTBG};bgImgs=[{name:"preloader",url:"bg_preloaderimg"},{name:"game",url:"bg_windowimg"},{name:"menu",url:"menuimg"},{name:"instructions",url:"bg_instructionsimg"},{name:"other",url:"bgimg"}],__WIDTHBG=640/__koefDisplay,__HEIGHTBG=960/__koefDisplay,WIDTHGAME=640/__koefDisplay,HEIGHTGAME=744/__koefDisplay,canvases={game:"gameField",bg:"background"};var _allMusic=new Array,_obsMusic=new Array,onoff=new Array;MusicCTRL={start:function(a){for(var b=a.target._loadQueueBackup,c=0;c<b.length;c++)b[c]._item.type==createjs.LoadQueue.SOUND&&(_allMusic[b[c]._item.id]=createjs.Sound.createInstance(b[c]._item.id))},on:function(a,b){b||(b=-1),1==b?b=null:b--,_allMusic[a]&&(onoff[a]={open:!0,loop:b});for(var c=1;_allMusic[a+c];)onoff[a+c]={open:!0,loop:b},c++;for(var d=0;d<_obsMusic.length;d++)_obsMusic[d].on&&_obsMusic[d].on(a)},off:function(a){_allMusic[a]&&(_allMusic[a].stop(),onoff[a]={open:!1});for(var b=1;_allMusic[a+b];)_allMusic[a+b].stop(),onoff[a+b]={open:!1},b++;for(var c=0;c<_obsMusic.length;c++)_obsMusic[c].off&&_obsMusic[c].off(a)},play:function(a){if(onoff[a]&&onoff[a].open){var b;b=onoff[a].loop?{loop:onoff[a].loop}:null,_allMusic[a].play(b)}},registerObserver:function(a){_obsMusic.push(a)}};